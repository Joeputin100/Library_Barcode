{
    "overall_goal": "To process book data, extract metadata from LOC, Google Books, and Vertex AI APIs, and generate barcode and QR code labels.",
    "key_knowledge": [
        "The project is `barcode` and is focused on processing book data.",
        "It uses LOC API, Google Books API, and Vertex AI for metadata extraction.",
        "The `streamlit_app.py` script is the main application.",
        "The `get_book_metadata_google_books` function now extracts `mainCategory` and `seriesInfo`.",
        "A `google_category_to_dewey_map` has been created for estimating DDNs from Google Books categories.",
        "The `clean_call_number` function now incorporates this Google Books DDN estimation as a fallback.",
        "Vertex AI is used as a final fallback for classification.",
        "The `streamlit_app.py` has been modified to display debug logs within an `st.expander` and provide a download button for full logs.",
        "Identified issues: Missing Series Title/Number, 'No genre' from Google Books, and ignored Vertex AI responses.",
        "The `query_parser.py` has been extended to handle individual barcodes, barcode ranges, barcodes starting with a prefix, and field-specific queries (author, title, series, ISBN, call number, holding barcode).",
        "The `marc_processor.py` module has been created to load and filter MARC records based on parsed queries. It correctly extracts holding barcodes from MARC tag 852 subfield 'p'.",
        "The TUI functionality has been separated into two distinct applications:",
        "  - `project_viewer.py`: A TUI for viewing project status (plan, state, context).",
        "  - `marc_query_tui.py`: A TUI for querying MARC records, including query confirmation and full result display."
    ],
    "current_plan": "Phase 1: Local MARC Parsing and Querying is now complete. The TUI applications have been separated and refined. The next step is to move to Phase 2: Data Enrichment and Processing."
}